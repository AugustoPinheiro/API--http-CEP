<?php
namespace App\Services;

use GuzzleHttp;
use DOMDocument;

// Turn off all error reporting
error_reporting(0);

class CorreiosApi
{
    protected $client;

    public function __construct(GuzzleHttp\Client $client)
    {
        $this->client = $client;
    }

    public function requisicao($parametro)
    {
        $response = $this->client->request('POST', env('CORREIOS_URL'), [
                'form_params' => [
                    env('CORREIOS_FORM_CEP') => $parametro
                ]
        ]);

        $body = $response->getBody(true);
        return $body;
    }
    public function buscar($parametro)
    {
        $htmlResponse = $this->requisicao($parametro);

        libxml_use_internal_errors(true);
        $dom = new DOMDocument;
        $dom->preserveWhiteSpace = false;
        $dom->loadHTML($htmlResponse);
        // $rows = $dom->getElementsByTagName('td');
        $Header = $dom->getElementsByTagName('th');
        $Detail = $dom->getElementsByTagName('td');
        $cidades16 = array("13563860","13568000","13563631","13564002","13563565","13567570","13562002","13566891","13565800","13572271","13568850","13573736","13562250","13564091","13565320","13565310","13568530","13566876","13573013","13573126","13567891","13567590","13568783","13569002","13572070","13567480","13566608","13569007","13566844","13569240","13568170","13573386","13563681","13563150","13560002","13566863","13563713","13564630","13563638","13568120","13563552","13568807","13571140","13566650","13570656","13561270","13568140","13560760","13570780","13573514","13575684","13563601","13572408","13563576","13566517","13566848","13568290","13564505","13563265","13573376","13570208","13568430","13568510","13563566","13567873","13574440","13561207","13569136","13568210","13566851","13575888","13565293","13573370","13570835","13568831","13574701","13572275","13571095","13562828","13571804","13567811","13569640","13568882","13570592","13563831","13573572","13573342","13565540","13570630","13560041","13572520","13573314","13562382","13566843","13562170","13572083","13563668","13575550","13571523","13563180","13566400","13573772","13575620","13573748","13568663","13567620","13565020","13566700","13560450","13563520","13568350","13575008","13573560","13566862","13574360","13560915","13566570","13572331","13568190","13575360","13565401","13563686","13572090","13564070","13568837","13569140","13562834","13564550","13565180","13572391","13572310","13560297","13563561","13563680","13562807","13572130","13574410","13573226","13563652","13574190","13566230","13563777","13573300","13562292","13563559","13565550","13566040","13566894","13564870","13560921","13565303","13575420","13562700","13562711","13566494","13573328","13573192","13575390","13575893","13573224","13561260","13573122","13562350","13573234","13571818","13563704","13572359","13567315","13564360","13563617","13566020","13563340","13573248","13569645","13562450","13564700","13575668","13571380","13566852","13572060","13567409","13563530","13561410","13563490","13565409","13563753","13560972","13566880","13565285","13565820","13573902","13564470","13569040","13560162","13560005","13568805","13568470","13567000","13568776","13564871","13567876","13573538","13567191","13574365","13569520","13572390","13562824","13563624","13572000","13566417","13575540","13565565","13573218","13567650","13565387","13572215","13564809","13565392","13565262","13562508","13566421","13562180","13568175","13561402","13568320","13573162","13574470","13563792","13565324","13564365","13564863","13572084","13570070","13575004","13575871","13571603","13565050","13560055","13560001","13574590","13563330","13563120","13566350","13575570","13573900","13575674","13573526","13571811","13562142","13564819","13570540","13564570","13569180","13563752","13569440","13565555","13560805","13573706","13569600","13565342","13571628","13563789","13562030","13568860","13572543","13573054","13561200","13568678","13575688","13575702","13565000","13569181","13573335","13567885","13560320","13575160","13573062","13565389","13573378","13572203","13565120","13560210","13564159","13562190","13574270","13570475","13560901","13560430","13564620","13564813","13575640","13560530","13573244","13560181","13564270","13560440","13564820","13566305","13567882","13565353","13565407","13564495","13562240","13566842","13572430","13562385","13565905","13573570","13568200","13570380","13569360","13563650","13572360","13561418","13566270","13574170","13560065","13563605","13563556","13564842","13565403","13566581","13566584","13566899","13573290","13561190","13564330","13565290","13563263","13574034","13566010","13563610","13575862","13563856","13574900","13560646","13573272","13573274","13567310","13568260","13573337","13565400","13568854","13563756","13564310","13569004","13570620","13563637","13568490","13575062","13562724","13561220","13571335","13565322","13574450","13563250","13563065","13566810","13574180","13563508","13562294","13563604","13563858","13564200","13565336","13560110","13571616","13575450","13574003","13563602","13563711","13568782","13568773","13562511","13562503","13575030","13565302","13561110","13563240","13563757","13573146","13563577","13564844","13570322","13560235","13575813","13571190","13573128","13568857","13566630","13565251","13565404","13562145","13575896","13564090","13563703","13568880","13564530","13572370","13570450","13563712","13573024","13574010","13562729","13567864","13574390","13565391","13561357","13562723","13564807","13570660","13563660","13562513","13565040","13568030","13573351","13575140","13568818","13564110","13567300","13564805","13566220","13565190","13573600","13573551","13563854","13573542","13560902","13562727","13572110","13568460","13566864","13566695","13568710","13562705","13566550","13575864","13563876","13575169","13573205","13562836","13560040","13562808","13573056","13573540","13564817","13575263","13563560","13566534","13570360","13563841","13563848","13563797","13563840","13560296","13569517","13571280","13564010","13567330","13568742","13575662","13564230","13563898","13563260","13561429","13560340","13573564","13560350","13573321","13573284","13565030","13563705","13572530","13563606","13573174","13565250","13563868","13570010","13564670","13573106","13569510","13570800","13571630","13563896","13568828","13573180","13570670","13569270","13561010","13565090","13568600","13563497","13575490","13565281","13571520","13566865","13573578","13565274","13565312","13569390","13560293","13565297","13563878","13561382","13561065","13573582","13573308","13574265","13573238","13561354","13564522","13573360","13563732","13572325","13560970","13569300","13563510","13570003","13574370","13575171","13568777","13570219","13563729","13564040","13564260","13563707","13568270","13567280","13573240","13567287","13563639","13563526","13569380","13567010","13563632","13575886","13562970","13565520","13568220","13564801","13562701","13564210","13567813","13565280","13573766","13563825","13561385","13563264","13563774","13573048","13568778","13566780","13572100","13574430","13560974","13565570","13574032","13563616","13570370","13575878","13575268","13573440","13565220","13575070","13563651","13573223","13561353","13569532","13566895","13560292","13571340","13566889","13571601","13568715","13566536","13567102","13572230","13567232","13565325","13568872","13575876","13562390","13571600","13563571","13569290","13563759","13573186","13566890","13574033","13561215","13564540","13565333","13563779","13573254","13568130","13569006","13566885","13560047","13573020","13573350","13565261","13562722","13566537","13563872","13573390","13563890","13571609","13561381","13575161","13570190","13563793","13574009","13561356","13565485","13569030","13574540","13562830","13566740","13575870","13573246","13572330","13563829","13564610","13574620","13569610","13570905","13569150","13565276","13572311","13573343","13562420","13563512","13563522","13562800","13560645","13566485","13571150","13573260","13574970","13568400","13570080","13573709","13573334","13563794","13563515","13561359","13562141","13563673","13560462","13571611","13565282","13565488","13570787","13563160","13560030","13562280","13561090","13563558","13560795","13563608","13573742","13565263","13575063","13567350","13563842","13561120","13568370","13564060","13569530","13561392","13563603","13570215","13560924","13562144","13566427","13568764","13568841","13574515","13566790","13565405","13563382","13561390","13568527","13565382","13560200","13566423","13573769","13571610","13573631","13573470","13564865","13569370","13563540","13565265","13567060","13566250","13574060","13562435","13570675","13573214","13563882","13570550","13567540","13562509","13568761","13562160","13565575","13568150","13563573","13569020","13560241","13575220","13560020","13575270","13566850","13568803","13571802","13565393","13569350","13567231","13571608","13574420","13566896","13570740","13570040","13565343","13572442","13571070","13560648","13565140","13570788","13575080","13566853","13560550","13574300","13573268","13566877","13565240","13563800","13563628","13560920","13562010","13566800","13563663","13562440","13563634","13573176","13570216","13564220","13561020","13572220","13567120","13575300","13562003","13562502","13570030","13563623","13566514","13564440","13573322","13566801","13566898","13568703","13568658","13575866","13563776","13561355","13567888","13568870","13561406","13570323","13568665","13563640","13563532","13560660","13561415","13570205","13561400","13567150","13561380","13571641","13566030","13575480","13562848","13560710","13563700","13563574","13575451","13573149","13568675","13563687","13565311","13571510","13573294","13566268","13571615","13562704","13561384","13563538","13568705","13571120","13564331","13570200","13574560","13573490","13564280","13569705","13571644","13573775","13566860","13568648","13570636","13566540","13573210","13570591","13575232","13564510","13570770","13570210","13570330","13560270","13563697","13563762","13575842","13573194","13563261","13575630","13565295","13571410","13567030","13563050","13574200","13574140","13562291","13565481","13571783","13561419","13562702","13566859","13574011","13569231","13565489","13570212","13570970","13565313","13565271","13568655","13573763","13567210","13566855","13568635","13563808","13566590","13563275","13575891","13563833","13564250","13561210","13560905","13565595","13573733","13565580","13575370","13573329","13571110","13563580","13564351","13573450","13562522","13563570","13564050","13567430","13563480","13575890","13562101","13567020","13573358","13562300","13563760","13566888","13573580","13561066","13571200","13575460","13562703","13562439","13560644","13562712","13566000","13574706","13573435","13563791","13563630","13569232","13566587","13568160","13575172","13572085","13568878","13573029","13573586","13566845","13575868","13565315","13568812","13568832","13571816","13567100","13569707","13573536","13567103","13562706","13566560","13562515","13560610","13570430","13573528","13563874","13577899","13565543","13573703","13571400","13570593","13571310","13563689","13567192","13574260","13563626","13570657","13564590","13573339","13570600","13562293","13566897","13560900","13560250","13563810","13564832","13567202","13564710","13569650","13574510","13564332","13561040","13573504","13573232","13575385","13569200","13570130","13573554","13561414","13563684","13565267","13573265","13575808","13567530","13561383","13574480","13562340","13572410","13563519","13573302","13566210","13562500","13565255","13567420","13563002","13560785","13572450","13573178","13566503","13573110","13575682","13562400","13567320","13573730","13573296","13568670","13575610","13569450","13564730","13573331","13564850","13565811","13564830","13563812","13565170","13571271","13568040","13575060","13563654","13567500","13563485","13571813","13565273","13563852","13560180","13575875","13572277","13573588","13562709","13560410","13563783","13575163","13573502","13575715","13560053","13575802","13566446","13561232","13568744","13573718","13571803","13575050","13573022","13569470","13570730","13564800","13564840","13573366","13575885","13568793","13563827","13568851","13565210","13569560","13563609","13566538","13564526","13565256","13568690","13563190","13573016","13560042","13565230","13562725","13565272","13562505","13566496","13563220","13561206","13562430","13575580","13560300","13573076","13564814","13566892","13570765","13568080","13562001","13568785","13566611","13565010","13563735","13565341","13573323","13571290","13571805","13560049","13563870","13565316","13560220","13563568","13561396","13571080","13565330","13570110","13573168","13568450","13565850","13563786","13563683","13567070","13571390","13568110","13561067","13572151","13565384","13568802","13573108","13573017","13574391","13571330","13562100","13570635","13565346","13571000","13561180","13565486","13575658","13572160","13574220","13565270","13571040","13568250","13570320","13568100","13564380","13565329","13575700","13574004","13568280","13574160","13565383","13575340","13564490","13565300","13560641","13574380","13560515","13568610","13564190","13568827","13575600","13571528","13560160","13565900","13566332","13570810","13562821","13573206","13570837","13573120","13562708","13561411","13573059","13569000","13571612","13574005","13566870","13573019","13575261","13566340","13563502","13569480","13571513","13570090","13575430","13568757","13568410","13568766","13573018","13563706","13562230","13573566","13573288","13573104","13566541","13566612","13565390","13575654","13573751","13565585","13566720","13563823","13569220","13571090","13572460","13568836","13573754","13564650","13573330","13562380","13567700","13570640","13575178","13564861","13573327","13565294","13561235","13565286","13563567","13560815","13564020","13560291","13562000","13571815","13571220","13566510","13575708","13568843","13563615","13566260","13570720","13570211","13573005","13566805","13573220","13563300","13571518","13560046","13560750","13569160","13570500","13570160","13573262","13560190","13570383","13571525","13568090","13564480","13566841","13565252","13569265","13566854","13568842","13565483","13564160","13566412","13567690","13564828","13568060","13570821","13562415","13566413","13575465","13571820","13575656","13567520","13563534","13571800","13573530","13567090","13568808","13563303","13563350","13568653","13563627","13568673","13565380","13571050","13564120","13570002","13564640","13573512","13566840","13574230","13566430","13570658","13570830","13568834","13572540","13563470","13575680","13567660","13572076","13575007","13563572","13573264","13571605","13565060","13563600","13573633","13563866","13566355","13565275","13560649","13566492","13561030","13575170","13567490","13563682","13566565","13562721","13565345","13570652","13566886","13566849","13567250","13565292","13568784","13562060","13567800","13575100","13566533","13568835","13565287","13563888","13565317","13569703","13568755","13567580","13575380","13565160","13573188","13566429","13562805","13562507","13566640","13565326","13567879","13567190","13563579","13562342","13564340","13567240","13562381","13563100","13575350","13567670","13565335","13568693","13574610","13562020","13571198","13571100","13571633","13573052","13568830","13563557","13567894","13568829","13573276","13573228","13563653","13573130","13562405","13572274","13564560","13562410","13561140","13569340","13563210","13573724","13568790","13567730","13567050","13575175","13573380","13575810","13560510","13564815","13563575","13565545","13566543","13573522","13561412","13565510","13575670","13569500","13566803","13563844","13575718","13573312","13566240","13569060","13562425","13566425","13571792","13565296","13561130","13567200","13575240","13563613","13573574","13566200","13573065","13566606","13563821","13575703","13573398","13575162","13565500","13575410","13568874","13573333","13570833","13570760","13563864","13560011","13575273","13568440","13568817","13572202","13560570","13573556","13569010","13563670","13569355","13566060","13572404","13570410","13571636","13575664","13574245","13564420","13563517","13566080","13569540","13563170","13565277","13570594","13563714","13568500","13569702","13568811","13563710","13565150","13570004","13566440","13573500","13563886","13569310","13560310","13575530","13568863","13573230","13566070","13570750","13563320","13568698","13573552","13568787","13565299","13560044","13569055","13563778","13567720","13573745","13571786","13570782","13566582","13568420","13561050","13573154","13573420","13573508","13563553","13560971","13566415","13561080","13564390","13563310","13568330","13570771","13568340","13568650","13568713","13560043","13571602","13566410","13575676","13569190","13565332","13573584","13560301","13563726","13562838","13573209","13565359","13567160","13566872","13560520","13563504","13562120","13574703","13575560","13565264","13569590","13563784","13575500","13568746","13567440","13565490","13575150","13563795","13565254","13575090","13568070","13562521","13575260","13562147","13573620","13567360","13566544","13563780","13568380","13566878","13573374","13566680","13573258","13564857","13565381","13573184","13565530","13568492","13566861","13569531","13568769","13575705","13565348","13560070","13560360","13566470","13573382","13575652","13572276","13571512","13568480","13575845","13564350","13563380","13563785","13573071","13564848","13573236","13565515","13574008","13565351","13566602","13571795","13572542","13566610","13575873","13574640","13566448","13565279","13568240","13566760","13574550","13565406","13570501","13574700","13570783","13565408","13561234","13566434","13563781","13563850","13571823","13563536","13568806","13572180","13565394","13573632","13572332","13573325","13571822","13562146","13575005","13573212","13564846","13560831","13575520","13564080","13562806","13565385","13562846","13563796","13572510","13563716","13564500","13565327","13568560","13563304","13563708","13573520","13563755","13573270","13569420","13563665","13565482","13570420","13571240","13572005","13560178","13565355","13567710","13566804","13562803","13568700","13568816","13571300","13563270","13563130","13574320","13569005","13573324","13560240","13573116","13571291","13569400","13575330","13563688","13560480","13573410","13563230","13575400","13571210","13575675","13570321","13563715","13569080","13560400","13560560","13561404","13566690","13560642","13561421","13570651","13567560","13562090","13567170","13573282","13574570","13564822","13560361","13569135","13571812","13571030","13572400","13564305","13568020","13566875","13570900","13570180","13563551","13571780","13564030","13573320","13573250","13563636","13560280","13568800","13563635","13560179","13565487","13565386","13563763","13573112","13563040","13575020","13568833","13570655","13570217","13562710","13568781","13565590","13566874","13575660","13568839","13570650","13566670","13567015","13562220","13563200","13573164","13572170","13573090","13568485","13573576","13566370","13564720","13572200","13566435","13573562","13563080","13565349","13565525","13565301","13568680","13566447","13567460","13575061","13566887","13565200","13571620","13568645","13566360","13563360","13563788","13573524","13567510","13573216","13562395","13568540","13574210","13569430","13568630","13563737","13573310","13563862","13570480","13562270","13566730","13570633","13573172","13568780","13572380","13560911","13571819","13572440","13570831","13573344","13573340","13562330","13569395","13570820","13574001","13575877","13560680","13573026","13564140","13574022","13573252","13572320","13561420","13574012","13568708","13570020","13575130","13571060","13562148","13568300","13570695","13562844","13572272","13573114","13566620","13570590","13570580","13573208","13566290","13561417","13566970","13563805","13575440","13575860","13573384","13564869","13568838","13569230","13566532","13562506","13568685","13566445","13575040","13562900","13563723","13560290","13573190","13573480","13570560","13568050","13573273","13564872","13565266","13566480","13566490","13567225","13565350","13573388","13569706","13570786","13573015","13573757","13574704","13565288","13573068","13569460","13565304","13566050","13568643","13573700","13560277","13573372","13564803","13564031","13565253","13573095","13562110","13573394","13565085","13568801","13566857","13567511","13563004","13566883","13568605","13571807","13573550","13574702","13571130","13571260","13570530","13563790","13575672","13566530","13574250","13560299","13564838","13569570","13571824","13575666","13565289","13568010","13560260","13568633","13572323","13565810","13572541","13562707","13575800","13566450","13562028","13573000","13570340","13561003","13571821","13569490","13566583","13560370","13569704","13573630","13574002","13560647","13562290","13567867","13571809","13574007","13562726","13568825","13570060","13565395","13562820","13561230","13560330","13564867","13575000","13566500","13571619","13564460","13560010","13568230","13565314","13563764","13560490","13568520","13573396","13572273","13571607","13570460","13573292","13573182","13561000","13562460","13573160","13570570","13567600","13570510","13570214","13565344","13567680","13575174","13562341","13574130","13573336","13560048","13562531","13573124","13565402","13575265","13565110","13567610","13564430","13575006","13565080","13565354","13569700","13575590","13563554","13574490","13572081","13565100","13572500","13570150","13575120","13568180","13565260","13570213","13570050","13574024","13565323","13568820","13571272","13573568","13566411","13560643","13568683","13563620","13561250","13570324","13563280","13567201","13570790","13560540","13572120","13568360","13572402","13566750","13564811","13568771","13564400","13566858","13570632","13573362","13562480","13565583","13563751","13572201","13564873","13567550","13562840","13567140","13572350","13561398","13573534","13563622","13563006","13571900","13571810","13573558","13563528","13560201","13575173","13566601","13563846","13565352","13562530","13566609","13560045","13570665","13569580","13573970","13560908","13567040","13564660","13573278","13560910","13566866","13574580","13565484","13562150","13566605","13566585","13563658","13563308","13564524","13570828","13573082","13574520","13566571","13565331","13562728","13570654","13573715","13563110","13568826","13571180","13560230","13563290","13563618","13563307","13570672","13575332","13564520","13568580","13572080","13575883","13569070","13564690","13564859","13563892","13575176","13573318","13562070","13570637","13570105","13565130","13575485","13564170","13562802","13568688","13560251","13562143","13572140","13575801","13570634","13566190","13564834","13563506","13564836","13571250","13570140","13568590","13573532","13568638","13571370","13567230","13568640","13563884","13569615","13567640","13562520","13574705","13566869","13561358","13565268","13565412","13570341","13568876","13573280","13568813","13573028","13566586","13566802","13566879","13560775","13563758","13563820","13573118","13573721","13561100","13565283","13563691","13568809","13575650","13571511","13561081","13564300","13574040","13569050","13568465","13563880","13563709","13563555","13568695","13562804","13571320","13566856","13565070","13569330","13565340","13562504","13562296","13563702","13573085","13561416","13574290","13566604","13575510","13573430","13571817","13567892","13562295","13567080","13562832","13572010","13564852","13567130","13568668","13568310","13571196","13561394","13575003","13570381","13574023","13563701","13573256","13568810","13566419","13570170","13573712","13567180","13571010","13563690","13573518","13571515","13566330","13567181","13571806","13574240","13568535","13567415","13572544","13570382","13573140","13562501","13572420","13562470","13561351","13564824","13573516","13574400","13562140","13568525","13563563","13568840","13565318","13574530","13560470","13567705","13565298","13574280","13563633","13570785","13574020","13563625","13560120","13562490","13565535","13563384","13570470","13564680","13563782","13571814","13571230","13571160","13570218","13571789","13567220","13573760","13565410","13574460","13575110","13565278","13572190","13562801","13565517","13562826","13562210","13566884","13573460","13563305","13563773","13560460","13573590","13575678","13572278","13563306","13566180","13573304","13568390","13563607","13574006","13567260","13575881","13560765","13562842","13566873","13563562","13565284","13572210","13572150","13566607","13568660","13568762","13563787","13570673","13566770","13573506","13571415","13566431","13571808","13567110","13564130","13563302","13565480","13570390","13566520","13562200","13563495","13566280","13563629","13568550","13564100","13563524","13564450","13568595","13573204","13564600","13571617","13561231","13561350","13565321","13562260","13561205","13566600","13564826","13573727","13573510","13563750","13569003","13565347","13571385","13575880","13573003","13571270","13563500","13561352","13561060","13566868","13570653","13568759","13563569","13563835","13566580","13565319","13560640","13563090","13566882","13565388","13561002","13563775","13575805","13560050","13565291","13575331","13564854","13568779","13561413","13566460","13566545","13563483","13564290","13575803","13573080","13573010","13573332","13563070","13564335","13566487","13575002","13563801","13563685","13567290","13571621","13573338","13562025","13563761","13563492","13575686","13575177","13571170","13571639","13560294","13564240","13560298","13570829","13572020","13569139","13563501","13573143","13572082","13563301","13569535","13566710","13574971","13572321","13573286","13565328","13574630","13560170","13573341","13561233","13563894","13571020","13564580","13564180","13566603","13575713","13575230","13562823","13573400","13563564","13560161","13575701","13569550","13571618","13571052","13566501","13568804","13573050","13565411","13574031","13565560","13563003","13563262","13574030","13565334","13575848","13575375","13571606","13574500","13567870","13564855","13565413","13565414","13567470","13563295","13573739","13567101","13568774","13563578","","","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370","13573370"); //Cidades do DDD16
    
    
        if ($Detail->length <= 1) {
            return [
                'error' => true,
                'message' => 'Nenhum endereço encontrado'
            ];
        }
        if ($Detail->length >= 8) {
            return [
                'error' => true,
                'message' => 'Nenhum CEP encontrado'
            ];
        }

        //#Get header name of the table
        foreach($Header as $NodeHeader) 
        {
            $aDataTableHeaderHTML[] = trim($NodeHeader->textContent);
        }
        //print_r($aDataTableHeaderHTML); die(); - debug
    
        //#Get row data/detail table without header name as key
        $i = 0;
        $j = 0;
        $teste = [];
        foreach($Detail as $sNodeDetail) 
        {
            $aDataTableDetailHTML[$j][] = trim($sNodeDetail->textContent);
            $i = $i + 1;
            $j = $i % count($aDataTableHeaderHTML) == 0 ? $j + 1 : $j;
        }
        //print_r($aDataTableDetailHTML); die();
        
        //#Get row data/detail table with header name as key and outer array index as row number
        for($i = 0; $i < count($aDataTableDetailHTML); $i++)
        {
            for($j = 0; $j < count($aDataTableHeaderHTML); $j++)
            {
                $aTempData[$i][$aDataTableHeaderHTML[$j]] = $aDataTableDetailHTML[$i][$j];
        }
             array_push($aDataTableDetailHTMl);
        }
        $aDataTableDetailHTML = $aTempData; unset($aTempData);
        
        
        if (in_array($parametro, $cidades16, TRUE)) 
        { 
            $estamos = true;
            $mensagem = null;
        } 
        else
        { 
            $estamos = false;
            $mensagem = 'Aqui nois nao chega';
        } 


        return [
            'deliveryMessage' => $mensagem,
            'delivery' => $estamos,
            'error' => false,
            'addresses' => $aDataTableDetailHTML
            
        ];
    }
}
?>
